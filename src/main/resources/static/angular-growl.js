angular.module("angular-growl",[]),angular.module("angular-growl").directive("growl",[function(){"use strict";return{restrict:"A",templateUrl:"templates/growl/growl.html",replace:!1,scope:{reference:"@",inline:"=",limitMessages:"="},controller:["$scope","$interval","growl","growlMessages",function(e,t,s,n){e.referenceId=e.reference||0,n.initDirective(e.referenceId,e.limitMessages),e.growlMessages=n,e.inlineMessage=angular.isDefined(e.inline)?e.inline:s.inlineMessages(),e.$watch("limitMessages",function(t){var s=n.directives[e.referenceId];angular.isUndefined(t)||angular.isUndefined(s)||(s.limitMessages=t)}),e.stopTimeoutClose=function(e){e.clickToClose||(angular.forEach(e.promises,function(e){t.cancel(e)}),e.close?n.deleteMessage(e):e.close=!0)},e.alertClasses=function(e){return{"alert-success":"success"===e.severity,"alert-error":"error"===e.severity,"alert-danger":"error"===e.severity,"alert-info":"info"===e.severity,"alert-warning":"warning"===e.severity,icon:e.disableIcons===!1,"alert-dismissable":!e.disableCloseButton}},e.showCountDown=function(e){return!e.disableCountDown&&e.ttl>0},e.wrapperClasses=function(){var t={};return t["growl-fixed"]=!e.inlineMessage,t[s.position()]=!0,t},e.computeTitle=function(e){var t={success:"Success",error:"Error",info:"Information",warn:"Warning"};return t[e.severity]}}]}}]),angular.module("angular-growl").run(["$templateCache",function(e){"use strict";void 0===e.get("templates/growl/growl.html")&&e.put("templates/growl/growl.html",'<div class="growl-container" ng-class="wrapperClasses()"><div class="growl-item alert" ng-repeat="message in growlMessages.directives[referenceId].messages" ng-class="alertClasses(message)" ng-click="stopTimeoutClose(message)"><button type="button" class="close" data-dismiss="alert" aria-hidden="true" ng-click="growlMessages.deleteMessage(message)" ng-show="!message.disableCloseButton">&times;</button><button type="button" class="close" aria-hidden="true" ng-show="showCountDown(message)">{{message.countdown}}</button><h4 class="growl-title" ng-show="message.title" ng-bind="message.title"></h4><div class="growl-message" ng-bind-html="message.text"></div></div></div>')}]),angular.module("angular-growl").provider("growl",function(){"use strict";var e={success:null,error:null,warning:null,info:null},t="messages",s="text",n="title",r="severity",i="ttl",o=!0,a="variables",l=0,u=!1,c="top-right",g=!1,d=!1,f=!1,h=!0,v=!0;this.globalTimeToLive=function(t){if("object"==typeof t)for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);else for(var n in e)e.hasOwnProperty(n)&&(e[n]=t);return this},this.globalTranslateMessages=function(e){return v=e,this},this.globalDisableCloseButton=function(e){return g=e,this},this.globalDisableIcons=function(e){return d=e,this},this.globalReversedOrder=function(e){return f=e,this},this.globalDisableCountDown=function(e){return h=e,this},this.messageVariableKey=function(e){return a=e,this},this.globalInlineMessages=function(e){return u=e,this},this.globalPosition=function(e){return c=e,this},this.messagesKey=function(e){return t=e,this},this.messageTextKey=function(e){return s=e,this},this.messageTitleKey=function(e){return n=e,this},this.messageSeverityKey=function(e){return r=e,this},this.messageTTLKey=function(e){return i=e,this},this.onlyUniqueMessages=function(e){return o=e,this},this.serverMessagesInterceptor=["$q","growl",function(e,s){function n(e){void 0!==e&&e.data&&e.data[t]&&e.data[t].length>0&&s.addServerMessages(e.data[t])}return{response:function(e){return n(e),e},responseError:function(t){return n(t),e.reject(t)}}}],this.$get=["$rootScope","$interpolate","$sce","$filter","$interval","growlMessages",function(t,m,w,p,b,M){function y(e){if(K&&e.translateMessage)e.text=K(e.text,e.variables)||e.text,e.title=K(e.title)||e.title;else{var s=m(e.text);e.text=s(e.variables)}var n=M.addMessage(e);return t.$broadcast("growlMessage",e),b(function(){},0,1),n}function C(t,s,n){var r,i=s||{};return r={text:t,title:i.title,severity:n,ttl:i.ttl||e[n],variables:i.variables||{},disableCloseButton:void 0===i.disableCloseButton?g:i.disableCloseButton,disableIcons:void 0===i.disableIcons?d:i.disableIcons,disableCountDown:void 0===i.disableCountDown?h:i.disableCountDown,position:i.position||c,referenceId:i.referenceId||l,translateMessage:void 0===i.translateMessage?v:i.translateMessage,destroy:function(){M.deleteMessage(r)},setText:function(e){r.text=w.trustAsHtml(String(e))},onclose:i.onclose,onopen:i.onopen},y(r)}function I(e,t){return C(e,t,"warning")}function x(e,t){return C(e,t,"error")}function D(e,t){return C(e,t,"info")}function $(e,t){return C(e,t,"success")}function T(e,t,s){return s=(s||"error").toLowerCase(),C(e,t,s)}function A(e){if(e&&e.length){var t,o,l,u;for(u=e.length,t=0;u>t;t++)if(o=e[t],o[s]){l=(o[r]||"error").toLowerCase();var c={};c.variables=o[a]||{},c.title=o[n],o[i]&&(c.ttl=o[i]),C(o[s],c,l)}}}function O(){return o}function S(){return f}function U(){return u}function B(){return c}var K;M.onlyUnique=o,M.reverseOrder=f;try{K=p("translate")}catch(q){}return{warning:I,error:x,info:D,success:$,general:T,addServerMessages:A,onlyUnique:O,reverseOrder:S,inlineMessages:U,position:B}}]}),angular.module("angular-growl").service("growlMessages",["$sce","$interval",function(e,t){"use strict";function s(e){var t;return t=i[e]?i[e]:i[e]={messages:[]}}function n(e){var t=e||0;return r.directives[t]||i[t]}var r=this;this.directives={};var i={};this.initDirective=function(e,t){return i[e]?(this.directives[e]=i[e],this.directives[e].limitMessages=t):this.directives[e]={messages:[],limitMessages:t},this.directives[e]},this.getAllMessages=function(e){e=e||0;var t;return t=n(e)?n(e).messages:[]},this.destroyAllMessages=function(e){for(var t=this.getAllMessages(e),s=t.length-1;s>=0;s--)t[s].destroy();var r=n(e);r&&(r.messages=[])},this.addMessage=function(n){var r,i,o,a;if(r=this.directives[n.referenceId]?this.directives[n.referenceId]:s(n.referenceId),i=r.messages,!this.onlyUnique||(angular.forEach(i,function(t){a=e.getTrustedHtml(t.text),n.text===a&&n.severity===t.severity&&n.title===t.title&&(o=!0)}),!o)){if(n.text=e.trustAsHtml(String(n.text)),n.ttl&&-1!==n.ttl&&(n.countdown=n.ttl/1e3,n.promises=[],n.close=!1,n.countdownFunction=function(){n.countdown>1?(n.countdown--,n.promises.push(t(n.countdownFunction,1e3,1,1))):n.countdown--}),angular.isDefined(r.limitMessages)){var l=i.length-(r.limitMessages-1);l>0&&i.splice(r.limitMessages-1,l)}if(this.reverseOrder?i.unshift(n):i.push(n),"function"==typeof n.onopen&&n.onopen(),n.ttl&&-1!==n.ttl){var u=this;n.promises.push(t(angular.bind(this,function(){u.deleteMessage(n)}),n.ttl,1,1)),n.promises.push(t(n.countdownFunction,1e3,1,1))}return n}},this.deleteMessage=function(e){var t=this.getAllMessages(e.referenceId),s=-1;for(var n in t)t.hasOwnProperty(n)&&(s=t[n]===e?n:s);s>-1&&(t[s].close=!0,t.splice(s,1)),"function"==typeof e.onclose&&e.onclose()}}]);